<!DOCTYPE html><html class="default" lang="en"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="IE=edge"/><title>tcompare - v6.0.1-4 | Node TAP</title><meta name="description" content="Documentation for Node TAP"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="stylesheet" href="../assets/style.css"/><link rel="stylesheet" href="../assets/highlight.css"/><link rel="stylesheet" href="../assets/custom.css"/><script defer src="../assets/main.js"></script><script async src="../assets/search.js" id="tsd-search-script"></script></head><body><script>document.documentElement.dataset.theme = localStorage.getItem("tsd-theme") || "os"</script><header class="tsd-page-toolbar">
<div class="tsd-toolbar-contents container">
<div class="table-cell" id="tsd-search" data-base="..">
<div class="field"><label for="tsd-search-field" class="tsd-widget tsd-toolbar-icon search no-caption"><svg width="16" height="16" viewBox="0 0 16 16" fill="none"><path d="M15.7824 13.833L12.6666 10.7177C12.5259 10.5771 12.3353 10.499 12.1353 10.499H11.6259C12.4884 9.39596 13.001 8.00859 13.001 6.49937C13.001 2.90909 10.0914 0 6.50048 0C2.90959 0 0 2.90909 0 6.49937C0 10.0896 2.90959 12.9987 6.50048 12.9987C8.00996 12.9987 9.39756 12.4863 10.5008 11.6239V12.1332C10.5008 12.3332 10.5789 12.5238 10.7195 12.6644L13.8354 15.7797C14.1292 16.0734 14.6042 16.0734 14.8948 15.7797L15.7793 14.8954C16.0731 14.6017 16.0731 14.1267 15.7824 13.833ZM6.50048 10.499C4.29094 10.499 2.50018 8.71165 2.50018 6.49937C2.50018 4.29021 4.28781 2.49976 6.50048 2.49976C8.71001 2.49976 10.5008 4.28708 10.5008 6.49937C10.5008 8.70852 8.71314 10.499 6.50048 10.499Z" fill="var(--color-text)"></path></svg></label><input type="text" id="tsd-search-field" aria-label="Search"/></div>
<div class="field">
<div id="tsd-toolbar-links"></div></div>
<ul class="results">
<li class="state loading">Preparing search index...</li>
<li class="state failure">The search index is not available</li></ul><a href="../index.html" class="title">Node TAP</a></div>
<div class="table-cell" id="tsd-widgets"><a href="#" class="tsd-widget tsd-toolbar-icon menu no-caption" data-toggle="menu" aria-label="Menu"><svg width="16" height="16" viewBox="0 0 16 16" fill="none"><rect x="1" y="3" width="14" height="2" fill="var(--color-text)"></rect><rect x="1" y="7" width="14" height="2" fill="var(--color-text)"></rect><rect x="1" y="11" width="14" height="2" fill="var(--color-text)"></rect></svg></a></div></div></header>
<div class="container container-main">
<div class="col-content">
<div class="tsd-page-title">
<ul class="tsd-breadcrumb">
<li><a href="../index.html">Node TAP</a></li>
<li><a href="tcompare.html">tcompare</a></li></ul>
<h1>Module tcompare - v6.0.1-4</h1></div>
<section class="tsd-panel tsd-typography"><a id="md:tcompare" class="tsd-anchor"></a><h1><a href="#md:tcompare">tcompare</a></h1><p>A comprehensive comparison library, for use in test frameworks.
Walks an object once, generating both a simple true/false result,
as well as a string representation of both the actual and
expected values (highlighting just the parts that differ) and a
patch-style diff string.</p>
<a id="md:usage" class="tsd-anchor"></a><h2><a href="#md:usage">USAGE</a></h2><pre><code class="language-ts"><span class="hl-6">// require() is fine too</span><br/><span class="hl-2">import</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-0">match</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-0">same</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-0">strict</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-0">has</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-0">hasStrict</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-0">matchStrict</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-0">matchOnly</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-0">matchOnlyStrict</span><span class="hl-1">,</span><br/><span class="hl-1">} </span><span class="hl-2">from</span><span class="hl-1"> </span><span class="hl-3">&#39;tcompare&#39;</span><br/><span class="hl-2">import</span><span class="hl-1"> </span><span class="hl-2">type</span><span class="hl-1"> { </span><span class="hl-0">Result</span><span class="hl-1"> } </span><span class="hl-2">from</span><span class="hl-1"> </span><span class="hl-3">&#39;tcompare&#39;</span><br/><br/><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-9">result</span><span class="hl-1">: </span><span class="hl-7">Result</span><span class="hl-1"> = </span><span class="hl-4">match</span><span class="hl-1">(</span><span class="hl-0">object</span><span class="hl-1">, </span><span class="hl-0">pattern</span><span class="hl-1">)</span><br/><span class="hl-2">if</span><span class="hl-1"> (!</span><span class="hl-0">result</span><span class="hl-1">.</span><span class="hl-0">match</span><span class="hl-1">) {</span><br/><span class="hl-1">  </span><span class="hl-0">console</span><span class="hl-1">.</span><span class="hl-4">log</span><span class="hl-1">(</span><span class="hl-3">`item did not match pattern`</span><span class="hl-1">)</span><br/><span class="hl-1">  </span><span class="hl-0">console</span><span class="hl-1">.</span><span class="hl-4">log</span><span class="hl-1">(</span><span class="hl-0">result</span><span class="hl-1">.</span><span class="hl-0">diff</span><span class="hl-1">)</span><br/><span class="hl-1">} </span><span class="hl-2">else</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-0">console</span><span class="hl-1">.</span><span class="hl-4">log</span><span class="hl-1">(</span><span class="hl-3">`it&#39;s a match!`</span><span class="hl-1">)</span><br/><span class="hl-1">}</span><br/><br/><span class="hl-6">// raw classes exported also</span><br/><span class="hl-2">import</span><span class="hl-1"> { </span><span class="hl-0">MatchOnly</span><span class="hl-1"> } </span><span class="hl-2">from</span><span class="hl-1"> </span><span class="hl-3">&#39;tcompare&#39;</span><br/><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-9">mo</span><span class="hl-1"> = </span><span class="hl-5">new</span><span class="hl-1"> </span><span class="hl-4">MatchOnly</span><span class="hl-1">({ </span><span class="hl-0">a:</span><span class="hl-1"> </span><span class="hl-8">1</span><span class="hl-1">, </span><span class="hl-0">b:</span><span class="hl-1"> </span><span class="hl-8">2</span><span class="hl-1"> }, { </span><span class="hl-0">expect:</span><span class="hl-1"> { </span><span class="hl-0">a:</span><span class="hl-1"> </span><span class="hl-0">Number</span><span class="hl-1"> } })</span><br/><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-9">diff</span><span class="hl-1">: </span><span class="hl-7">string</span><span class="hl-1"> = </span><span class="hl-0">mo</span><span class="hl-1">.</span><span class="hl-4">print</span><span class="hl-1">()</span><br/><span class="hl-0">console</span><span class="hl-1">.</span><span class="hl-4">log</span><span class="hl-1">(</span><span class="hl-0">mo</span><span class="hl-1">.</span><span class="hl-0">match</span><span class="hl-1">) </span><span class="hl-6">// false</span><br/><span class="hl-0">console</span><span class="hl-1">.</span><span class="hl-4">log</span><span class="hl-1">(</span><span class="hl-0">diff</span><span class="hl-1">)</span><br/><span class="hl-6">/*</span><br/><span class="hl-6">--- expected</span><br/><span class="hl-6">+++ actual</span><br/><span class="hl-6">@@ -1,2 +1,3 @@</span><br/><span class="hl-6"> Object {</span><br/><span class="hl-6">+  &quot;b&quot;: 2,</span><br/><span class="hl-6"> }</span><br/><span class="hl-6">*/</span>
</code><button>Copy</button></pre>
<ul>
<li><code>indent</code> - String to indent each nested level. Defaults to <code>&#39;  &#39;</code>.## METHODS</li>
</ul>
<p>Each method corresponds to an exported class. Except for
<code>format()</code> (which returns a string), they all return a <code>Result</code>
object. (That is, <code>{diff:string, match:boolean}</code>.)</p>
<ul>
<li><code>format(object, [options])</code> - No comparisons performed. Just print out the
object. Returns just the formatted string.</li>
<li><code>same(object, pattern, [options])</code> - Deep equivalence. Ensure
that all items in the pattern are found in the object, and vice
versa, matching loosely (so, for example <code>1</code> will match with
<code>&#39;1&#39;</code>).</li>
<li><code>strict(object, pattern, [options])</code> - Deep equality. Ensure
that all items in the pattern are found in the object, and vice
versa, matching strictly (so, for example <code>1</code> will not match
with <code>&#39;1&#39;</code>). Objects must have the same constructors, and all
fields will be matched recursively using the same <code>strict</code>
test.</li>
<li><code>has(object, pattern, [options])</code> - Ensure that all items in
the pattern are found in the object, but ignore additional
items found in the object, matching loosely. Classes only need
to match loosely, so a plain JavaScript object can be used to
check for fields on a class instance.</li>
<li><code>hasStrict(object, pattern, [options])</code> - Ensure that all items
in the pattern are found in the object, but ignore additional
items found in the object, matching strictly. Constructors do
<em>not</em> have to match between objects, but if <code>constructor</code> is
set as an ownProperty on the pattern object, then it will be
checked for strict equality.</li>
<li><code>match(object, pattern, [options])</code> - Verify that all items in
<code>pattern</code> are found in <code>object</code>, and that they match in an
extremely loose way. This is the loosest possible algorithm,
allowing cases where we just want to verify that an object
contains a few important properties. In summary:<ul>
<li>If the object and pattern are loosely equal, then pass</li>
<li>If the object and the pattern are both Regular Expressions,
Date objects or Buffers, then pass if they represent
equivalent values.</li>
<li>If the pattern is a RegExp, cast object to a string, and
test against the RegExp.</li>
<li>If both are Strings, pass if pattern appears in object. (</li>
<li>If pattern is a function, and object is an instance of that
function, then pass. (This also applies to Symbol, Number,
String, etc.)</li>
<li>If pattern and object are collections (object, map, set,
array or iterable), then compare their contents. Each type
of collection can only match its same type, with the
exception of non-Set iterables (including <code>arguments</code>
objects), which are cast to Arrays.</li>
</ul>
</li>
<li><code>matchOnly(object, pattern, [options])</code> - Same comparison
testing as <code>match()</code>, but will fail if the <code>object</code> has any
properties that are not present in the <code>pattern</code>.</li>
<li><code>matchStrict(object, pattern, [options])</code> - Same comparison
testing as <code>match()</code>, but will fail when two values are
equivalent but not strictly equal. (That is, when
<code>a == b &amp;&amp; !(a === b)</code>.)</li>
<li><code>matchOnlyStrict(object, pattern, [options])</code> - Same comparison
testing as <code>matchOnly()</code>, but will fail when two values are
equivalent but not strictly equal. (That is, when
<code>a == b &amp;&amp; !(a === b)</code>.)</li>
</ul>
<p>There are classes exported to correspond to each of these. All of these are
instantiated like <code>new Format(object, options)</code>. An <code>expect</code> option is
required for all classes except <code>Format</code>. Call <code>obj.print()</code> on the resulting
object to generate a diff. Once the diff (or format) is generated, it&#39;ll have
a <code>match</code> boolean member.</p>
<a id="md:classes" class="tsd-anchor"></a><h2><a href="#md:classes">Classes</a></h2><p>The exported classes should usually not be used directly, and
their implementation details are subject to change as needed
between versions.</p>
<p>The class heirarchy is:</p>
<pre><code><span class="hl-0">Format</span><br/><span class="hl-1">+-- </span><span class="hl-0">Same</span><br/><span class="hl-1">    +-- </span><span class="hl-0">Strict</span><br/><span class="hl-1">    +-- </span><span class="hl-0">Has</span><br/><span class="hl-1">    |   +-- </span><span class="hl-4">HasStrict</span><span class="hl-1"> (</span><span class="hl-0">uses</span><span class="hl-1"> </span><span class="hl-7">Strict</span><span class="hl-1">.</span><span class="hl-0">prototype</span><span class="hl-1">.</span><span class="hl-0">test</span><span class="hl-1">)</span><br/><span class="hl-1">    |   +-- </span><span class="hl-0">Match</span><br/><span class="hl-1">    |       +-- </span><span class="hl-4">MatchStrict</span><span class="hl-1"> (</span><span class="hl-0">fails</span><span class="hl-1"> </span><span class="hl-0">if</span><span class="hl-1"> </span><span class="hl-0">a</span><span class="hl-1">==</span><span class="hl-0">b</span><span class="hl-1"> &amp;&amp; </span><span class="hl-0">a</span><span class="hl-1">!==</span><span class="hl-0">b</span><span class="hl-1">)</span><br/><span class="hl-1">    +-- </span><span class="hl-4">MatchOnly</span><span class="hl-1"> (</span><span class="hl-0">uses</span><span class="hl-1"> </span><span class="hl-7">Match</span><span class="hl-1">.</span><span class="hl-0">prototype</span><span class="hl-1">.</span><span class="hl-0">test</span><span class="hl-1">)</span><br/><span class="hl-1">    +-- </span><span class="hl-4">MatchOnlyStrict</span><span class="hl-1"> (</span><span class="hl-0">uses</span><span class="hl-1"> </span><span class="hl-7">MatchStrict</span><span class="hl-1">.</span><span class="hl-0">prototype</span><span class="hl-1">.</span><span class="hl-0">test</span><span class="hl-1">)</span>
</code><button>Copy</button></pre>
<p>In order to compare or print an object, instantiate one of the
classes, and call then the <code>print()</code> method, which will return
the diff or formatted value. The <code>match</code> boolean property will
be set after calling <code>print()</code>. If the objects match, then the
returned <code>diff</code> will also be an empty string.</p>
<a id="md:options" class="tsd-anchor"></a><h2><a href="#md:options">OPTIONS</a></h2><a id="md:formatoptions-type" class="tsd-anchor"></a><h3><a href="#md:formatoptions-type"><code>FormatOptions</code> type</a></h3><p>Every method and class can take the following options.</p>
<ul>
<li><p><code>sort</code> - Set to <code>true</code> to sort object keys. This is important when
serializing in a deterministic way.</p>
</li>
<li><p><code>style</code> - Set to <code>pretty</code> for a very human-readable style of object printing.
Set to <code>js</code> for a copy-and-paste friendly valid JavaScript output. Set to
<code>tight</code> for a minimal white-space js format. Default is <code>pretty</code>. Example:</p>
<pre><code><span class="hl-6">// pretty style</span><br/><span class="hl-0">Object</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-3">&quot;myMap&quot;</span><span class="hl-1">: </span><span class="hl-0">Map</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-0">Object</span><span class="hl-1"> {</span><br/><span class="hl-1">      </span><span class="hl-3">&quot;a&quot;</span><span class="hl-1">: </span><span class="hl-8">1</span><span class="hl-1">,</span><br/><span class="hl-1">    } </span><span class="hl-5">=&gt;</span><span class="hl-1"> </span><span class="hl-0">Object</span><span class="hl-1"> {</span><br/><span class="hl-1">      </span><span class="hl-3">&quot;b&quot;</span><span class="hl-1">: </span><span class="hl-8">2</span><span class="hl-1">,</span><br/><span class="hl-1">    }</span><br/><span class="hl-1">  }</span><br/><span class="hl-1">}</span><br/><br/><span class="hl-6">// js style</span><br/><span class="hl-1">{</span><br/><span class="hl-1">  </span><span class="hl-3">&quot;myMap&quot;</span><span class="hl-1">: </span><span class="hl-5">new</span><span class="hl-1"> </span><span class="hl-4">Map</span><span class="hl-1">([</span><br/><span class="hl-1">    [{</span><br/><span class="hl-1">      </span><span class="hl-3">&quot;a&quot;</span><span class="hl-0">:</span><span class="hl-1"> </span><span class="hl-8">1</span><span class="hl-1">,</span><br/><span class="hl-1">    }, {</span><br/><span class="hl-1">      </span><span class="hl-3">&quot;b&quot;</span><span class="hl-0">:</span><span class="hl-1"> </span><span class="hl-8">2</span><span class="hl-1">,</span><br/><span class="hl-1">    }]</span><br/><span class="hl-1">  ])</span><br/><span class="hl-1">}</span><br/><br/><span class="hl-6">// tight style</span><br/><span class="hl-1">{</span><span class="hl-3">&quot;myMap&quot;</span><span class="hl-1">:</span><span class="hl-5">new</span><span class="hl-1"> </span><span class="hl-4">Map</span><span class="hl-1">([[{</span><span class="hl-3">&quot;a&quot;</span><span class="hl-0">:</span><span class="hl-8">1</span><span class="hl-1">,},{</span><span class="hl-3">&quot;b&quot;</span><span class="hl-0">:</span><span class="hl-8">2</span><span class="hl-1">,}],]),}</span>
</code><button>Copy</button></pre>
<p>Note that <code>tight</code> is not suitable for comparisons, only formatting.</p>
</li>
<li><p><code>bufferChunkSize</code> - The number of bytes to show per line when
printing long <code>Buffer</code> objects. Defaults to 32.</p>
</li>
<li><p><code>indent</code> - String to indent each nested level. Defaults to <code>&#39;  &#39;</code>.</p>
</li>
<li><p><code>includeEnumerable</code> - Set to <code>true</code> to walk over <em>all</em>
enumerable properties of a given object when comparing or
formatting, rather than the default of only showing enumerable
own-properties. Note that calling getter functions may be
hazardous, as they may trigger side-effects.</p>
</li>
<li><p><code>includeGetters</code> - Set to <code>true</code> to walk over all enumerable
getters on an object&#39;s prototype (but not from further down the
prototype chain), in addition to own-properties. This is useful
in cases where you want to compare or print an object with
enumerable getters that return internal values in a read-only
manner. Note that calling getter functions can be hazardous, as
they may trigger side-effects.</p>
</li>
</ul>
<a id="md:sameoptions-type" class="tsd-anchor"></a><h3><a href="#md:sameoptions-type"><code>SameOptions</code> type</a></h3><p>Comparison classes also take the following options.</p>
<ul>
<li><code>expect</code> - required. The pattern object to compare against.</li>
<li><code>diffContext</code> - Optional, default 10. Number of lines of
context to show in diff output.</li>
</ul>
<a id="md:circular-references" class="tsd-anchor"></a><h2><a href="#md:circular-references">Circular References</a></h2><p>Circular references are displayed using YAML-like references, in
order to determine <em>which</em> item is circularly referenced.</p>
<p>When doing comparisons, a pattern and object will be considered
matching if they contain the <em>same</em> circularity. So, for example,
if a pattern refers to itself, then an object should refer to
itself as well.</p>
<pre><code class="language-js"><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-9">a</span><span class="hl-1"> = { </span><span class="hl-0">list:</span><span class="hl-1"> [], </span><span class="hl-0">b:</span><span class="hl-1"> {} }</span><br/><span class="hl-0">a</span><span class="hl-1">.</span><span class="hl-0">list</span><span class="hl-1">.</span><span class="hl-4">push</span><span class="hl-1">(</span><span class="hl-0">a</span><span class="hl-1">)</span><br/><span class="hl-0">a</span><span class="hl-1">.</span><span class="hl-0">list</span><span class="hl-1">.</span><span class="hl-4">push</span><span class="hl-1">(</span><span class="hl-0">a</span><span class="hl-1">.</span><span class="hl-0">b</span><span class="hl-1">)</span><br/><span class="hl-0">a</span><span class="hl-1">.</span><span class="hl-0">b</span><span class="hl-1">.</span><span class="hl-0">a</span><span class="hl-1"> = </span><span class="hl-0">a</span><br/><span class="hl-0">console</span><span class="hl-1">.</span><span class="hl-4">log</span><span class="hl-1">(</span><span class="hl-4">format</span><span class="hl-1">(</span><span class="hl-0">a</span><span class="hl-1">))</span><br/><br/><span class="hl-6">/*</span><br/><span class="hl-6">&amp;ref_1 Object {</span><br/><span class="hl-6">  &quot;list&quot;: Array [</span><br/><span class="hl-6">    &lt;*ref_1&gt;,</span><br/><span class="hl-6">    Object {</span><br/><span class="hl-6">      &quot;a&quot;: &lt;*ref_1&gt;,</span><br/><span class="hl-6">    },</span><br/><span class="hl-6">  ],</span><br/><span class="hl-6">  &quot;b&quot;: Object {</span><br/><span class="hl-6">    &quot;a&quot;: &lt;*ref_1&gt;,</span><br/><span class="hl-6">  },</span><br/><span class="hl-6">}</span><br/><span class="hl-6">*/</span>
</code><button>Copy</button></pre>
<p>Note that circular references are never going to be valid
JavaScript, even when using the <code>js</code> style.</p>
<a id="md:caveat-circularity-between-pattern-and-object-gets-weird" class="tsd-anchor"></a><h3><a href="#md:caveat-circularity-between-pattern-and-object-gets-weird">Caveat: Circularity Between Pattern and Object Gets Weird</a></h3><p>It&#39;s possible to get strange output when an object and pattern
refer to one another.</p>
<pre><code class="language-js"><span class="hl-2">import</span><span class="hl-1"> { </span><span class="hl-0">same</span><span class="hl-1"> } </span><span class="hl-2">from</span><span class="hl-1"> </span><span class="hl-3">&#39;tcompare&#39;</span><br/><br/><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-9">a</span><span class="hl-1"> = {}</span><br/><span class="hl-0">a</span><span class="hl-1">.</span><span class="hl-0">o</span><span class="hl-1"> = </span><span class="hl-0">a</span><br/><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-9">b</span><span class="hl-1"> = { </span><span class="hl-0">o:</span><span class="hl-1"> </span><span class="hl-0">a</span><span class="hl-1"> }</span><br/><br/><span class="hl-0">console</span><span class="hl-1">.</span><span class="hl-4">error</span><span class="hl-1">(</span><span class="hl-4">same</span><span class="hl-1">(</span><span class="hl-0">a</span><span class="hl-1">, </span><span class="hl-0">b</span><span class="hl-1">).</span><span class="hl-0">diff</span><span class="hl-1">)</span><br/><br/><span class="hl-6">// produces this confusing output:</span><br/><span class="hl-6">/*</span><br/><span class="hl-6">--- expected</span><br/><span class="hl-6">+++ actual</span><br/><span class="hl-6">@@ -1,5 +1,3 @@</span><br/><span class="hl-6"> &amp;ref_1 Object {</span><br/><span class="hl-6">-  &quot;o&quot;: &amp;ref_1 Object {</span><br/><span class="hl-6">-    &quot;o&quot;: &lt;*ref_1&gt;,</span><br/><span class="hl-6">-  },</span><br/><span class="hl-6">+  &quot;o&quot;: &lt;*ref_1&gt;,</span><br/><span class="hl-6"> }</span><br/><span class="hl-6">*/</span>
</code><button>Copy</button></pre>
<p>The more correct output would be something like:</p>
<pre><code><span class="hl-1">--- </span><span class="hl-0">expected</span><br/><span class="hl-1">+++ </span><span class="hl-0">actual</span><br/><span class="hl-1">@@ -</span><span class="hl-8">1</span><span class="hl-1">,</span><span class="hl-8">5</span><span class="hl-1"> +</span><span class="hl-8">1</span><span class="hl-1">,</span><span class="hl-8">3</span><span class="hl-1"> @@</span><br/><span class="hl-1"> &amp;</span><span class="hl-0">ref_1</span><span class="hl-1"> </span><span class="hl-0">Object</span><span class="hl-1"> {</span><br/><span class="hl-1">-  </span><span class="hl-3">&quot;o&quot;</span><span class="hl-1">: &amp;</span><span class="hl-0">ref_2</span><span class="hl-1"> </span><span class="hl-0">Object</span><span class="hl-1"> {</span><br/><span class="hl-1">-    </span><span class="hl-3">&quot;o&quot;</span><span class="hl-1">: &lt;*</span><span class="hl-7">ref_2</span><span class="hl-1">&gt;,</span><br/><span class="hl-1">-  },</span><br/><span class="hl-1">+  </span><span class="hl-3">&quot;o&quot;</span><span class="hl-1">: &lt;*</span><span class="hl-7">ref_1</span><span class="hl-1">&gt;,</span><br/><span class="hl-1"> }</span>
</code><button>Copy</button></pre>
<p>However, this requires tracking IDs in a much more complicated
way, being aware of whether the object is being read as an
pattern object or test object when determining its reference ID.</p>
<p>Since this is a relatively unusual thing to happen, and only
affects the output (but still properly detects whether it should
be treated as a match or not), it will likely not be addressed.</p>
</section>
<section class="tsd-panel-group tsd-index-group">
<section class="tsd-panel tsd-index-panel">
<h3 class="tsd-index-heading uppercase">Index</h3>
<section class="tsd-index-section">
<h3 class="tsd-index-heading">Modules</h3>
<div class="tsd-index-list"><a href="tcompare.format.html" class="tsd-index-link"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><g id="icon-4"><rect fill="var(--color-icon-background)" stroke="var(--color-ts-namespace)" stroke-width="1.5" x="1" y="1" width="22" height="22" rx="6"></rect><path d="M9.33 16V7.24H10.77L13.446 14.74C13.43 14.54 13.41 14.296 13.386 14.008C13.37 13.712 13.354 13.404 13.338 13.084C13.33 12.756 13.326 12.448 13.326 12.16V7.24H14.37V16H12.93L10.266 8.5C10.282 8.692 10.298 8.936 10.314 9.232C10.33 9.52 10.342 9.828 10.35 10.156C10.366 10.476 10.374 10.784 10.374 11.08V16H9.33Z" fill="var(--color-text)"></path></g></svg><span>format</span></a>
<a href="tcompare.has.html" class="tsd-index-link"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="#icon-4"></use></svg><span>has</span></a>
<a href="tcompare.has_strict.html" class="tsd-index-link"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="#icon-4"></use></svg><span>has-<wbr/>strict</span></a>
<a href="tcompare.index.html" class="tsd-index-link"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="#icon-4"></use></svg><span>index</span></a>
<a href="tcompare.match.html" class="tsd-index-link"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="#icon-4"></use></svg><span>match</span></a>
<a href="tcompare.match_only.html" class="tsd-index-link"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="#icon-4"></use></svg><span>match-<wbr/>only</span></a>
<a href="tcompare.match_only_strict.html" class="tsd-index-link"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="#icon-4"></use></svg><span>match-<wbr/>only-<wbr/>strict</span></a>
<a href="tcompare.match_strict.html" class="tsd-index-link"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="#icon-4"></use></svg><span>match-<wbr/>strict</span></a>
<a href="tcompare.same.html" class="tsd-index-link"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="#icon-4"></use></svg><span>same</span></a>
<a href="tcompare.strict.html" class="tsd-index-link"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="#icon-4"></use></svg><span>strict</span></a>
<a href="tcompare.styles.html" class="tsd-index-link"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="#icon-4"></use></svg><span>styles</span></a>
</div></section></section></section></div>
<div class="col-sidebar">
<div class="page-menu">
<div class="tsd-navigation settings">
<details class="tsd-index-accordion"><summary class="tsd-accordion-summary">
<h3><svg width="20" height="20" viewBox="0 0 24 24" fill="none"><path d="M4.93896 8.531L12 15.591L19.061 8.531L16.939 6.409L12 11.349L7.06098 6.409L4.93896 8.531Z" fill="var(--color-text)" id="icon-chevronDown"></path></svg>Settings</h3></summary>
<div class="tsd-accordion-details">
<div class="tsd-filter-visibility">
<h4 class="uppercase">Member Visibility</h4><form>
<ul id="tsd-filter-options">
<li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-protected" name="protected"/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Protected</span></label></li>
<li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-private" name="private"/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Private</span></label></li>
<li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-inherited" name="inherited" checked/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Inherited</span></label></li>
<li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-external" name="external"/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>External</span></label></li></ul></form></div>
<div class="tsd-theme-toggle">
<h4 class="uppercase">Theme</h4><select id="tsd-theme"><option value="os">OS</option><option value="light">Light</option><option value="dark">Dark</option></select></div></div></details></div>
<details open class="tsd-index-accordion tsd-page-navigation"><summary class="tsd-accordion-summary">
<h3><svg width="20" height="20" viewBox="0 0 24 24" fill="none"><use href="#icon-chevronDown"></use></svg>On This Page</h3></summary>
<div class="tsd-accordion-details">
<ul>
<li>
<ul>
<li><a href="#md:tcompare"><span>tcompare</span></a></li>
<li>
<ul>
<li><a href="#md:usage"><span>USAGE</span></a></li>
<li><a href="#md:classes"><span>Classes</span></a></li>
<li><a href="#md:options"><span>OPTIONS</span></a></li>
<li>
<ul>
<li><a href="#md:formatoptions-type"><span>Format<wbr/>Options type</span></a></li>
<li><a href="#md:sameoptions-type"><span>Same<wbr/>Options type</span></a></li></ul></li>
<li><a href="#md:circular-references"><span>Circular <wbr/>References</span></a></li>
<li>
<ul>
<li><a href="#md:caveat-circularity-between-pattern-and-object-gets-weird"><span>Caveat: <wbr/>Circularity <wbr/>Between <wbr/>Pattern and <wbr/>Object <wbr/>Gets <wbr/>Weird</span></a></li></ul></li></ul></li></ul></li></ul></div></details></div>
<div class="site-menu">
<nav class="tsd-navigation"><a href="../index.html"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="#icon-4"></use></svg><span>Node TAP</span></a>
<ul class="tsd-small-nested-navigation">
<li><a href="_tapjs_after.html"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="#icon-4"></use></svg><span>@tapjs/after -<wbr/> v0.0.0-<wbr/>18</span></a></li>
<li><a href="_tapjs_after_each.html"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="#icon-4"></use></svg><span>@tapjs/after-<wbr/>each -<wbr/> v0.0.0-<wbr/>18</span></a></li>
<li><a href="_tapjs_asserts.html"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="#icon-4"></use></svg><span>@tapjs/asserts -<wbr/> v0.0.0-<wbr/>18</span></a></li>
<li><a href="_tapjs_before.html"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="#icon-4"></use></svg><span>@tapjs/before -<wbr/> v0.0.0-<wbr/>18</span></a></li>
<li><a href="_tapjs_before_each.html"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="#icon-4"></use></svg><span>@tapjs/before-<wbr/>each -<wbr/> v0.0.0-<wbr/>18</span></a></li>
<li><a href="_tapjs_clock.html"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="#icon-4"></use></svg><span>@tapjs/clock -<wbr/> v0.0.0-<wbr/>8</span></a></li>
<li><a href="_tapjs_config.html"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="#icon-4"></use></svg><span>@tapjs/config -<wbr/> v2.0.0-<wbr/>19</span></a></li>
<li><a href="_tapjs_core.html"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="#icon-4"></use></svg><span>@tapjs/core -<wbr/> v0.0.0-<wbr/>18</span></a></li>
<li><a href="_tapjs_create_plugin.html"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="#icon-4"></use></svg><span>@tapjs/create-<wbr/>plugin -<wbr/> v1.0.3-<wbr/>18</span></a></li>
<li><a href="_tapjs_docs.html"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="#icon-4"></use></svg><span>@tapjs/docs</span></a></li>
<li><a href="_tapjs_dummy_plugin.html"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="#icon-4"></use></svg><span>@tapjs/dummy-<wbr/>plugin -<wbr/> v0.0.0-<wbr/>18</span></a></li>
<li><a href="_tapjs_esbuild_kit.html"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="#icon-4"></use></svg><span>@tapjs/esbuild-<wbr/>kit -<wbr/> v0.0.0-<wbr/>18</span></a></li>
<li><a href="_tapjs_filter.html"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="#icon-4"></use></svg><span>@tapjs/filter -<wbr/> v0.0.0-<wbr/>18</span></a></li>
<li><a href="_tapjs_fixture.html"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="#icon-4"></use></svg><span>@tapjs/fixture -<wbr/> v0.0.0-<wbr/>18</span></a></li>
<li><a href="_tapjs_intercept.html"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="#icon-4"></use></svg><span>@tapjs/intercept -<wbr/> v0.0.0-<wbr/>18</span></a></li>
<li><a href="_tapjs_mock.html"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="#icon-4"></use></svg><span>@tapjs/mock -<wbr/> v0.0.0-<wbr/>19</span></a></li>
<li><a href="_tapjs_nock.html"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="#icon-4"></use></svg><span>@tapjs/nock -<wbr/> v3.0.0-<wbr/>18</span></a></li>
<li><a href="npm_init_template.html"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="#icon-4"></use></svg><span>npm-<wbr/>init-<wbr/>template -<wbr/> v1.0.3-<wbr/>1</span></a></li>
<li><a href="tap_parser.html"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="#icon-4"></use></svg><span>tap-<wbr/>parser -<wbr/> v15.0.0-<wbr/>2</span></a></li>
<li><a href="_tapjs_reporter.html"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="#icon-4"></use></svg><span>@tapjs/reporter -<wbr/> v0.0.0-<wbr/>20</span></a></li>
<li><a href="_tapjs_run.html"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="#icon-4"></use></svg><span>@tapjs/run -<wbr/> v0.0.0-<wbr/>20</span></a></li>
<li><a href="_tapjs_sinon.html"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="#icon-4"></use></svg><span>@tapjs/sinon -<wbr/> v0.0.0-<wbr/>18</span></a></li>
<li><a href="_tapjs_snapshot.html"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="#icon-4"></use></svg><span>@tapjs/snapshot -<wbr/> v0.0.0-<wbr/>18</span></a></li>
<li><a href="_tapjs_spawn.html"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="#icon-4"></use></svg><span>@tapjs/spawn -<wbr/> v0.0.0-<wbr/>18</span></a></li>
<li><a href="_tapjs_stack.html"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="#icon-4"></use></svg><span>@tapjs/stack -<wbr/> v0.0.0-<wbr/>6</span></a></li>
<li><a href="_tapjs_stdin.html"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="#icon-4"></use></svg><span>@tapjs/stdin -<wbr/> v0.0.0-<wbr/>18</span></a></li>
<li><a href="tap.html"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="#icon-4"></use></svg><span>tap -<wbr/> v18.0.0-<wbr/>22</span></a></li>
<li>
<details class="tsd-index-accordion" open data-key="tcompare"><summary class="tsd-accordion-summary"><svg width="20" height="20" viewBox="0 0 24 24" fill="none"><use href="#icon-chevronDown"></use></svg><a href="tcompare.html" class="current"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="#icon-4"></use></svg><span>tcompare -<wbr/> v6.0.1-<wbr/>4</span></a></summary>
<div class="tsd-accordion-details">
<ul class="tsd-nested-navigation">
<li><a href="tcompare.format.html"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="#icon-4"></use></svg><span>format</span></a></li>
<li><a href="tcompare.has.html"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="#icon-4"></use></svg><span>has</span></a></li>
<li><a href="tcompare.has_strict.html"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="#icon-4"></use></svg><span>has-<wbr/>strict</span></a></li>
<li><a href="tcompare.index.html"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="#icon-4"></use></svg><span>index</span></a></li>
<li><a href="tcompare.match.html"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="#icon-4"></use></svg><span>match</span></a></li>
<li><a href="tcompare.match_only.html"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="#icon-4"></use></svg><span>match-<wbr/>only</span></a></li>
<li><a href="tcompare.match_only_strict.html"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="#icon-4"></use></svg><span>match-<wbr/>only-<wbr/>strict</span></a></li>
<li><a href="tcompare.match_strict.html"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="#icon-4"></use></svg><span>match-<wbr/>strict</span></a></li>
<li><a href="tcompare.same.html"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="#icon-4"></use></svg><span>same</span></a></li>
<li><a href="tcompare.strict.html"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="#icon-4"></use></svg><span>strict</span></a></li>
<li><a href="tcompare.styles.html"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="#icon-4"></use></svg><span>styles</span></a></li></ul></div></details></li>
<li><a href="_tapjs_test.html"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="#icon-4"></use></svg><span>@tapjs/test -<wbr/> v0.0.0-<wbr/>18</span></a></li>
<li><a href="_tapjs_typescript.html"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="#icon-4"></use></svg><span>@tapjs/typescript -<wbr/> v0.0.0-<wbr/>18</span></a></li>
<li><a href="_tapjs_worker.html"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="#icon-4"></use></svg><span>@tapjs/worker -<wbr/> v0.0.0-<wbr/>18</span></a></li>
<li><a href="tap_yaml.html"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="#icon-4"></use></svg><span>tap-<wbr/>yaml -<wbr/> v2.1.1-<wbr/>1</span></a></li></ul></nav></div></div></div>
<div class="tsd-generator">
<p>Generated using <a href="https://typedoc.org/" rel="noopener" target="_blank">TypeDoc</a></p></div>
<div class="overlay"></div></body></html>